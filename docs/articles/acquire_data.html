<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="flowdex">
<title>Acquire Data • flowdex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Acquire Data">
<meta property="og:description" content="flowdex">
<meta property="og:image" content="https://bpollner.github.io/flowdex/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flowdex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/flowdex.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/description.html">Description</a>
    <a class="dropdown-item" href="../articles/acquire_data.html">Acquire Data</a>
    <a class="dropdown-item" href="../articles/workflow_1.html">Workflow 1: Define Gating Strategy and Polygon Gates</a>
    <a class="dropdown-item" href="../articles/workflow_2.html">Workflow 2: Extract Fluorescence Distributions</a>
    <a class="dropdown-item" href="../articles/accessory.html">Repair &amp; Accessory Functions</a>
    <a class="dropdown-item" href="../articles/acknowledgements.html">Acknowledgements</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bpollner/flowdex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Acquire Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bpollner/flowdex/blob/HEAD/vignettes/acquire_data.Rmd" class="external-link"><code>vignettes/acquire_data.Rmd</code></a></small>
      <div class="d-none name"><code>acquire_data.Rmd</code></div>
    </div>

    
    
<p>After running the setup as described in <a href="https://bpollner.github.io/flowdex/articles/flowdex.html">Get
Started</a>, it is time for data acquisition – go and measure your
samples, then come back and put your fcs files into the folder
‘fcsFiles’.</p>
<div class="section level2">
<h2 id="simulate-data-acquisition">Simulate Data Acquisition<a class="anchor" aria-label="anchor" href="#simulate-data-acquisition"></a>
</h2>
<p>Simulate data acquisition now by copying the files from
‘flowdexTutorial/fcsFiles’ to ‘tap_water_home/fcsFiles’:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"/flowdex_tutorial/fcsFiles"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">to</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"/tap_water_home/fcsFiles"</span><span class="op">)</span>
<span class="va">cs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">cs</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-structured-id-string-and-dictionary">Using Structured ID String and Dictionary<a class="anchor" aria-label="anchor" href="#using-structured-id-string-and-dictionary"></a>
</h2>
<p>If so desired, it is possible to generate class- and numerical
variables further describing each sample resp. the dataset by providing
a structured character string to the <strong>Sample-ID field</strong> of
each sample in the GUI of the FCM-machine <strong>at the time of data
acquisition</strong>.</p>
<p>This character string will then later be expanded using a dictionary
(located in ‘tap_water_home/dictionary’) to expand the abbreviations to
its long names.</p>
<div class="section level3">
<h3 id="using-the-structured-id-string">Using the Structured ID String<a class="anchor" aria-label="anchor" href="#using-the-structured-id-string"></a>
</h3>
<p>As the assigning of the structured character string to each sample
has to be done at the time of data acquisition in the GUI of the
FCM-machine, we´d like to explain the process by showing and describing
what was used in the case of our tutorial data.</p>
<p>Lets consider for example the sample named
‘N_na_GPos_T4_th1_b3.fcs’.:<br>
This is a sample of the experiment-group (‘GPos’), from day 4 (‘T4’),
first third of beakers (‘th1’), and from that the beaker number 3
(‘b3’).<br>
The structured character string now contains <strong>elements and
groups</strong>, each separated by a dedicated single character. The
default value for separating groups is <code>;</code> and that for
separating elements is <code>:</code>.</p>
<p>There can be as many groups as desired. A single group consists of
exactly two elements: the key and the value, separated per default by
<code>:</code> . For the sample above, the input in the sample-ID field
in the GUI of the FCM-machine at the time of data acquisition now would
be:</p>
<pre><code><span class="va">tr</span><span class="op">:</span> <span class="va">GPos</span>; <span class="va">Td</span><span class="op">:</span> <span class="fl">4</span>; <span class="va">wt</span><span class="op">:</span> <span class="va">nativ</span>; <span class="va">ap</span><span class="op">:</span> <span class="va">no</span>; <span class="va">th</span><span class="op">:</span> <span class="va">th1</span>; <span class="va">ha</span><span class="op">:</span> <span class="va">ha1</span>; <span class="va">bk</span><span class="op">:</span> <span class="va">b3</span></code></pre>
<p>Here, we have 7 groups: tr, Td, wt, ap, th, ha and bk, all separated
by a <code>;</code>. ‘tr’ e.g. will be expanded to ‘C_treatment’ as
defined in the dictionary. ‘GPos’ is the value in the first group,
meaning that this sample belongs to the experiment group (denoted as
‘GPos’). The next group ‘Td: 4’ means that the treatment time for this
sample was 4 days, and so on.</p>
<ul>
<li>The <strong>first part</strong> of an element is always the
<strong>short name</strong>, the abbreviation that gets expanded to its
long name using the dictionary. The <strong>second part</strong> of the
element is its <strong>actual value</strong>. The first part can be
thought of as the column name in a spreadsheet, while the second part is
the actual value within that column.</li>
<li>The order of the groups is not relevant, they can be in different
order for different samples (but as this could be confusing during data
acquisition, this is not recommended). If an erroneous sample ID is
provided, it can be repaired later using the function
<code><a href="../reference/repairSID.html">repairSID()</a></code>.</li>
<li>The data, i.e. the class- and numerical variables assigned to each
sample can later be accessed via the slot <code>cyTags</code> in the
object created by e.g. function <code><a href="../reference/flowdexit.html">flowdexit()</a></code>, and they will
also be exported to file (if exporting to xlsx). These data can be very
helpful and convenient when further analyzing the fluorescence
distributions.</li>
</ul>
</div>
<div class="section level3">
<h3 id="using-the-dictionary">Using the Dictionary<a class="anchor" aria-label="anchor" href="#using-the-dictionary"></a>
</h3>
<p>Considering the sample-IDs present in our tutorial fcs files, we
require a dictionary translating the present abbreviations to their long
names. For that, copy the dictionary from
<code>flowdex_tutorial/dictionary/dictionary.xlsx</code> to
<code>tap_water_home/dictionary</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"/flowdex_tutorial/dictionary"</span><span class="op">)</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">to</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"/tap_water_home/dictionary"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>Open the copied xlsx file, look at the column named ‘Abbreviation’:
For each element name (the first part of an element) in the sample ID
there is an entry in the dictionary, along with its long name (the final
‘column name’ when thinking in a spreadsheet).</p>
</div>
<div class="section level3">
<h3 id="defining-class--and-numerical-variables">Defining Class- and Numerical Variables<a class="anchor" aria-label="anchor" href="#defining-class--and-numerical-variables"></a>
</h3>
<ul>
<li><p>By <strong>prepending the long names in the dictionary</strong>
with dedicated strings it is possible to define each group as being
either a class-variable or a numerical variable.</p></li>
<li><p>The default string for class variables is <code>C_</code> , and
that for numerical variables is <code>Y_</code> .</p></li>
<li><p>Prepending the long names in the dictionary with either
class-variable or numerical variable prefix is
<strong>mandatory</strong>.</p></li>
</ul>
<p>By now we should have 108 fcs files in ‘tap_water_home/fcsFiles’ and
one file ‘dictionary.xlsx’ in the folder
‘tap_water_home/dictionary’.</p>
<p>Continue to <a href="https://bpollner.github.io/flowdex/articles/workflow_1.html">Workflow
1</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Bernhard Pollner.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
