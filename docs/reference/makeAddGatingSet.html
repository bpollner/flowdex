<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Read in FCS files, put them together in a gating set and apply
the gating strategy as previously defined."><title>Make Gating Set and Add Gates — makeAddGatingSet • flowdex</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make Gating Set and Add Gates — makeAddGatingSet"><meta property="og:description" content="Read in FCS files, put them together in a gating set and apply
the gating strategy as previously defined."><meta property="og:image" content="https://bpollner.github.io/flowdex/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flowdex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/flowdex.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/description.html">Description</a>
    <a class="dropdown-item" href="../articles/bottled_water.html">Re-Calculate to Events per Volume Unit</a>
    <a class="dropdown-item" href="../articles/acquire_data.html">Acquire Data</a>
    <a class="dropdown-item" href="../articles/workflow_1.html">Workflow 1: Define Gating Strategy and Polygon Gates</a>
    <a class="dropdown-item" href="../articles/workflow_2.html">Workflow 2: Extract Fluorescence Distributions</a>
    <a class="dropdown-item" href="../articles/accessory.html">Repair &amp; Accessory Functions</a>
    <a class="dropdown-item" href="../articles/acknowledgements.html">Acknowledgements</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bpollner/flowdex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Make Gating Set and Add Gates</h1>
      <small class="dont-index">Source: <a href="https://github.com/bpollner/flowdex/blob/HEAD/R/gen-functions.R" class="external-link"><code>R/gen-functions.R</code></a></small>
      <div class="d-none name"><code>makeAddGatingSet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Read in FCS files, put them together in a gating set and apply
the gating strategy as previously defined.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">makeAddGatingSet</span><span class="op">(</span>
  patt <span class="op">=</span> <span class="cn">NULL</span>,
  fn <span class="op">=</span> <span class="st">"."</span>,
  gateStrat <span class="op">=</span> <span class="st">"."</span>,
  foN.gateStrat <span class="op">=</span> <span class="st">"."</span>,
  type.gateStrat <span class="op">=</span> <span class="st">"."</span>,
  comp <span class="op">=</span> <span class="st">"."</span>,
  tx <span class="op">=</span> <span class="st">"."</span>,
  channel <span class="op">=</span> <span class="st">"."</span>,
  fcsRepair <span class="op">=</span> <span class="cn">FALSE</span>,
  verbose <span class="op">=</span> <span class="st">"."</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>patt</dt>
<dd><p>A regular expression defining a possible subset of FCS files
residing in the directory specified by <code>fn</code> to read in. Only matching
patterns will be included.</p></dd>
<dt>fn</dt>
<dd><p>Character length one. The name of the folder where FCS files should
be read from. If left at the default '.', the folder name as defined in the
settings file (key: 'foN_fcsFiles') will be used.</p></dd>
<dt>gateStrat</dt>
<dd><p>Character length one. The name of the file defining the
gating strategy. If left at the default '.', the name as defined in the
settings file (key: 'fiN_gateStrat') will be used.</p></dd>
<dt>foN.gateStrat</dt>
<dd><p>Character length one. The name of the folder where the
file defining the gating strategy and the gate definitions reside. If left
at the default '.', the name as defined in the settings file
(key: 'foN_gating') will be used.</p></dd>
<dt>type.gateStrat</dt>
<dd><p>Character length one, can be either 'csv' or 'xlsx'.
The type of file defining the gating strategy. Currently, csv and xlsx
files are supported. If left at the default '.', the filetype as defined in
the settings (key: 'dV_gateStratInputType') file will be used.</p></dd>
<dt>comp</dt>
<dd><p>Logical. If compensation should be applied or not. If left at
the default '.', the value as defined in the settings file (key 'dV_comp')
will be used.</p></dd>
<dt>tx</dt>
<dd><p>Character length one. The transformation applied to *all* channels
within the individual flow sets. If left at the default '.', the value as
defined in the settings file (key 'dV_tx') will be used. (Currently only
'fjbiex' is implemented.)</p></dd>
<dt>channel</dt>
<dd><p>A regular expression indicating which channels, i.e. which
columns to keep from the original flowFrames; is passed down to argument
<code>column.pattern</code> of <code><a href="https://rdrr.io/pkg/flowCore/man/read.flowSet.html" class="external-link">read.flowSet</a></code>. Set to NULL
to read data from all channels. If left at the default '.', the value as
defined in the settings file (key 'dV_channel') will be used.</p></dd>
<dt>fcsRepair</dt>
<dd><p>Logical. If set to TRUE, fcs-files in the folder
specified at argument 'fn' will be checked for multiplied entries in the
keywords, as after some testing the author came to the humble conclusion that
these multiplied keywords can be the reason for the error message: <br><code>"The HEADER and the TEXT segment define different starting
point ... to read the data"</code>. <br>
If 'fcsRepair' is set to TRUE, all except the last of each multiplied
keyword will be removed and the fcs file will be saved to disc,
overwriting the original fcs file <strong>without further warning</strong>. <br>
Use the function <code><a href="checkRepairFcsFiles.html">checkRepairFcsFiles</a></code> which does offer more
options to manually check and repair afflicted fcs files. There, it is
possible to display multiplied keywords and to select which one to keep.</p></dd>
<dt>verbose</dt>
<dd><p>Logical. If status messages should be displayed. If left at
the default '.', the value as defined in the settings file (key 'dV_verbose')
will be used.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of <code><a href="class-GatingSet_fd.html">class-GatingSet_fd</a></code> with added and
recomputed gates.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This is a convenience wrapper for the two functions
<code><a href="makeGatingSet.html">makeGatingSet</a></code> and <code><a href="addGates.html">addGates</a></code>.
 In order to see a schematic representation of 'parent' and 'child' gates,
simply use 'plot'.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Extraction functions: 
<code><a href="addGates.html">addGates</a>()</code>,
<code><a href="makeGatingSet.html">makeGatingSet</a>()</code>,
<code><a href="makefdmat.html">makefdmat</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">data_source</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/bpollner/data/raw/main/flowdex_examples/flowdex_examples.zip"</span></span>
<span class="r-in"><span class="fu"><a href="check_download_data.html">check_download_data</a></span><span class="op">(</span><span class="va">td</span>, <span class="va">data_source</span><span class="op">)</span></span>
<span class="r-in"><span class="va">exp_home</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">td</span>, <span class="st">"/flowdex_examples"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">old_wd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">exp_home</span><span class="op">)</span></span>
<span class="r-in"><span class="co">#</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/assign.html" class="external-link">assign</a></span><span class="op">(</span><span class="st">"get_settings_from_flowdex_package_root"</span>, <span class="cn">TRUE</span>, pos<span class="op">=</span><span class="va">.GlobalEnv</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># only required to make the examples run automatically</span></span>
<span class="r-in"><span class="co"># you should not call 'assign' if you run the examples manually</span></span>
<span class="r-in"><span class="co"># the effect of setting 'get_settings_from_flowdex_package_root' to TRUE</span></span>
<span class="r-in"><span class="co"># is that the file 'flowdex_settings.R' in 'root' of the installed package</span></span>
<span class="r-in"><span class="co"># 'flowdex' will be sourced instead of the one in the user-defined location.</span></span>
<span class="r-in"><span class="co">#</span></span>
<span class="r-in"><span class="va">gs1</span> <span class="op">&lt;-</span> <span class="fu">makeAddGatingSet</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading in fcs files... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Producing gating set... Applying fjbiexp transformation... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gating: (1 gate) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done!</span>
<span class="r-in"><span class="va">gs2</span> <span class="op">&lt;-</span> <span class="fu">makeAddGatingSet</span><span class="op">(</span>patt <span class="op">=</span> <span class="st">"T4"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading in fcs files... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Producing gating set... Applying fjbiexp transformation... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gating: (1 gate) </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done!</span>
<span class="r-in"><span class="va">gs3</span> <span class="op">&lt;-</span> <span class="fu">makeAddGatingSet</span><span class="op">(</span>gateStrat <span class="op">=</span> <span class="st">"gateStrat_2"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reading in fcs files... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Producing gating set... Applying fjbiexp transformation... ok. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Gating: (6 gates)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> done!</span>
<span class="r-in"><span class="va">gs3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A GatingSet of class 'GatingSet_fd' with 12 samples:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Index             SampleNames</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1 N_na_GNeg_T4_th1_b1.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      2 N_na_GNeg_T4_th1_b2.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      3 N_na_GNeg_T4_th1_b3.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      4 N_na_GNeg_T5_th1_b1.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      5 N_na_GNeg_T5_th1_b2.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      6 N_na_GNeg_T5_th1_b3.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      7 N_na_GPos_T4_th1_b1.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      8 N_na_GPos_T4_th1_b2.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      9 N_na_GPos_T4_th1_b3.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    10 N_na_GPos_T5_th1_b1.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    11 N_na_GPos_T5_th1_b2.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    12 N_na_GPos_T5_th1_b3.fcs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following 10 channels are available:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FSC.A    SSC.A    FITC.A    PE.A    PerCP.A    PE.Cy7.A    APC.A    APC.Cy7.A    V450.A    V500.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following gating strategy derived from file 'gateStrat_2.xlsx' has been applied:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           GateName           Parent GateOnX GateOnY  GateDefinition extractOn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             DNA+             root  FITC.A PerCP.A     BactStainV1    FITC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        Unstained             root  FITC.A PerCP.A     UnstainedV1    FITC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      HighSSC_fsc        Unstained   FSC.A   SSC.A  HighSSC_FSC_V1     FSC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     HighSSC_fitc             root  FITC.A PerCP.A HighSSC_FITC_V1    FITC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 HighSSC_fsc.fitc      HighSSC_fsc  FITC.A PerCP.A HighSSC_FITC_V1    FITC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     HighSSC_ffif HighSSC_fsc.fitc   FSC.A   SSC.A  HighSSC_FSC_V1     FSC.A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   minRange maxRange keepData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1250     4000     TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        0     1000    FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        0     4000    FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        0     1000    FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        0     1000    FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        0     4000     TRUE</span>
<span class="r-in"><span class="co">#</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">old_wd</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Bernhard Pollner.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

